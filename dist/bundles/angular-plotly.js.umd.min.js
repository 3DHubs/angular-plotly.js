!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("plotly.js/dist/plotly.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","plotly.js/dist/plotly.js","@angular/common"],e):e((t["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.Plotlyjs,t.ng.common)}(this,function(t,r,e,i){"use strict";var n,o;(o=n||(n={})).Figure=function(){},o.PlotlyHTMLElement=function(){};var s=function(){function t(){if(this.plotly=e,"undefined"==typeof this.plotly)throw new Error("Peer dependency plotly.js isn't installed")}return t.prototype.newPlot=function(t,e,i,r){return this.plotly.newPlot(t,e,i)},t.prototype.plot=function(t,e,i,r){return this.plotly.plot(t,e,i)},t.prototype.update=function(t,e,i,r){return this.plotly.update(t,e,i)},t.prototype.resize=function(t){return this.plotly.Plots.resize(t)},t}();s.decorators=[{type:r.Injectable}],s.ctorParameters=function(){return[]};var a=function(){function t(t,e,i){this.plotly=t,this.iterableDiffers=e,this.keyValueDiffers=i,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.initialized=new r.EventEmitter,this.update=new r.EventEmitter,this.purge=new r.EventEmitter,this.error=new r.EventEmitter}return t.prototype.ngOnInit=function(){var e=this;this.createPlot().then(function(){var t=e.createFigure();e.initialized.emit(t)})},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined);var t=this.createFigure();this.purge.emit(t)},t.prototype.ngOnChanges=function(t){var e=!1,i=t.revision;i&&!i.isFirstChange()&&(e=!0);var r=t.debug;r&&!r.isFirstChange()&&(e=!0),e&&this.redraw(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){var t=!1;this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=undefined;this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=undefined;t&&this.plotlyInstance&&this.redraw()},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var e=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config).then(function(t){e.plotlyInstance=t,e.getWindow().gd=e.debug?t:undefined,e.updateWindowResizeHandler()},function(t){console.error("Error while plotting:",t),e.error.emit(t)})},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.redraw=function(){var e=this;if(!this.plotlyInstance){var t=new Error("Plotly component wasn't initialized");throw this.error.emit(t),t}return this.createPlot().then(function(){var t=e.createFigure();e.update.emit(t)})},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?this.resizeHandler===undefined&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined)},t.prototype.dataDifferTrackBy=function(t,e){var i=Object.assign({},e,{uid:""});return JSON.stringify(i)},t}();a.decorators=[{type:r.Component,args:[{selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[s]}]}],a.ctorParameters=function(){return[{type:s},{type:r.IterableDiffers},{type:r.KeyValueDiffers}]},a.propDecorators={plotEl:[{type:r.ViewChild,args:["plot"]}],data:[{type:r.Input}],layout:[{type:r.Input}],config:[{type:r.Input}],style:[{type:r.Input}],divId:[{type:r.Input}],revision:[{type:r.Input}],className:[{type:r.Input}],debug:[{type:r.Input}],useResizeHandler:[{type:r.Input}],initialized:[{type:r.Output}],update:[{type:r.Output}],purge:[{type:r.Output}],error:[{type:r.Output}]};var l=function(){};l.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule],declarations:[a],exports:[a]}]}],t.PlotlyModule=l,t.PlotComponent=a,t.PlotlyService=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-plotly.js.umd.min.js.map
