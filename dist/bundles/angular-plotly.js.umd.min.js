!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("plotly.js/dist/plotly.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","plotly.js/dist/plotly.js","@angular/common"],e):e((t["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.Plotlyjs,t.ng.common)}(this,function(t,n,e,i){"use strict";var r,o;(o=r||(r={})).Figure=function(){},o.PlotlyHTMLElement=function(){};var s=function(){function t(){if(this.plotly=e,"undefined"==typeof this.plotly)throw new Error("Peer dependency plotly.js isn't installed")}return t.prototype.newPlot=function(t,e,i,n){return this.plotly.newPlot(t,e,i)},t.prototype.plot=function(t,e,i,n){return this.plotly.plot(t,e,i)},t.prototype.update=function(t,e,i,n){return this.plotly.update(t,e,i)},t.prototype.resize=function(t){return this.plotly.Plots.resize(t)},t}();s.decorators=[{type:n.Injectable}],s.ctorParameters=function(){return[]};var a=function(){function t(t,e,i){this.plotly=t,this.iterableDiffers=e,this.keyValueDiffers=i,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.initialized=new n.EventEmitter,this.update=new n.EventEmitter,this.purge=new n.EventEmitter,this.error=new n.EventEmitter,this.afterExport=new n.EventEmitter,this.afterPlot=new n.EventEmitter,this.animated=new n.EventEmitter,this.animatingFrame=new n.EventEmitter,this.animationInterrupted=new n.EventEmitter,this.autoSize=new n.EventEmitter,this.beforeExport=new n.EventEmitter,this.buttonClicked=new n.EventEmitter,this.click=new n.EventEmitter,this.clickAnnotation=new n.EventEmitter,this.deselect=new n.EventEmitter,this.doubleClick=new n.EventEmitter,this.framework=new n.EventEmitter,this.hover=new n.EventEmitter,this.legendClick=new n.EventEmitter,this.legendDoubleClick=new n.EventEmitter,this.relayout=new n.EventEmitter,this.restyle=new n.EventEmitter,this.redraw=new n.EventEmitter,this.selected=new n.EventEmitter,this.selecting=new n.EventEmitter,this.sliderChange=new n.EventEmitter,this.sliderEnd=new n.EventEmitter,this.sliderStart=new n.EventEmitter,this.transitioning=new n.EventEmitter,this.transitionInterrupted=new n.EventEmitter,this.unhover=new n.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","click","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover"]}return t.prototype.ngOnInit=function(){var e=this;this.createPlot().then(function(){var t=e.createFigure();e.initialized.emit(t)})},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined);var t=this.createFigure();this.purge.emit(t)},t.prototype.ngOnChanges=function(t){var e=!1,i=t.revision;i&&!i.isFirstChange()&&(e=!0);var n=t.debug;n&&!n.isFirstChange()&&(e=!0),e&&this.updatePlot(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){var t=!1;this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=undefined;this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=undefined;t&&this.plotlyInstance&&this.updatePlot()},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var n=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config).then(function(i){n.plotlyInstance=i,n.getWindow().gd=n.debug?i:undefined,n.eventNames.forEach(function(e){var t="plotly_"+e.toLowerCase();i.on(t,function(t){return n[e].emit(t)})}),n.updateWindowResizeHandler()},function(t){console.error("Error while plotting:",t),n.error.emit(t)})},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.updatePlot=function(){var e=this;if(!this.plotlyInstance){var t=new Error("Plotly component wasn't initialized");throw this.error.emit(t),t}return this.createPlot().then(function(){var t=e.createFigure();e.update.emit(t)})},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?this.resizeHandler===undefined&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined)},t.prototype.dataDifferTrackBy=function(t,e){var i=Object.assign({},e,{uid:""});return JSON.stringify(i)},t}();a.decorators=[{type:n.Component,args:[{selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[s]}]}],a.ctorParameters=function(){return[{type:s},{type:n.IterableDiffers},{type:n.KeyValueDiffers}]},a.propDecorators={plotEl:[{type:n.ViewChild,args:["plot"]}],data:[{type:n.Input}],layout:[{type:n.Input}],config:[{type:n.Input}],style:[{type:n.Input}],divId:[{type:n.Input}],revision:[{type:n.Input}],className:[{type:n.Input}],debug:[{type:n.Input}],useResizeHandler:[{type:n.Input}],initialized:[{type:n.Output}],update:[{type:n.Output}],purge:[{type:n.Output}],error:[{type:n.Output}],afterExport:[{type:n.Output}],afterPlot:[{type:n.Output}],animated:[{type:n.Output}],animatingFrame:[{type:n.Output}],animationInterrupted:[{type:n.Output}],autoSize:[{type:n.Output}],beforeExport:[{type:n.Output}],buttonClicked:[{type:n.Output}],click:[{type:n.Output}],clickAnnotation:[{type:n.Output}],deselect:[{type:n.Output}],doubleClick:[{type:n.Output}],framework:[{type:n.Output}],hover:[{type:n.Output}],legendClick:[{type:n.Output}],legendDoubleClick:[{type:n.Output}],relayout:[{type:n.Output}],restyle:[{type:n.Output}],redraw:[{type:n.Output}],selected:[{type:n.Output}],selecting:[{type:n.Output}],sliderChange:[{type:n.Output}],sliderEnd:[{type:n.Output}],sliderStart:[{type:n.Output}],transitioning:[{type:n.Output}],transitionInterrupted:[{type:n.Output}],unhover:[{type:n.Output}]};var l=function(){};l.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule],declarations:[a],exports:[a]}]}],t.PlotlyModule=l,t.PlotComponent=a,t.PlotlyService=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-plotly.js.umd.min.js.map
